# How to stack like Xie

Hi. I apologize in advance for being bad at explaining things.

If you know about Xie stacking, I'm 99.9% sure you are able to stack a center 4-wide combo. It looks something like this:

![image](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/a2cfe940-7c8e-466b-b7fc-6db45defd23d)

But how do you open a 4-wide? Well, four.lol shows two examples: with a T piece and with a Z/S piece.

![image](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/1601b26b-75bf-412a-a0ba-f174887c8087) ![image](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/3acf7e3c-7828-437e-86b8-aaa9842412df)

Have you ever thought about why these specific placements? Why not just start with a flat T next to the left wall and do JOL on the right wall?

![image](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/d8bc3eec-7a18-46ce-9449-3170d21227ea)

How is this board state any different from the ones on four.lol? The answer is residue

## Residue

If you asked me about Xie stacking recently, I probably yapped to you about residue, but never properly explained what it is and how it is defined. When I talk about residue, what I truly mean is the extra blocks on top of a box shape. Any box shape works,
it doesn't matter what width and height it is. Here are a few examples, the grey part is the box and the colorful parts are the residue.

![Без названия (9)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/ad58a5a6-516f-4072-9bcc-219644f2b575)

Pic above is an 8-wide stack with a 5 block residue.

![Без названия (10)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/dbacac25-1432-4a97-bb5b-2fd0c1df2e8e)

6-wide stack with a 2 block residue

![Без названия (11)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/3860f187-ab76-4b93-9170-50fe74d5372d)


9-wide stack with a 12 block residue

![Без названия (12)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/d9a08428-b8da-490f-9bf6-c63fabe5ff7c)


And lastly, a 2w with 2 block residue and a 7w with a 13 block residue

## What makes 4-wide combo possible to combo...

...is the 3-block residue that your 4-wide well has. It is at the very bottom of the matrix, but nonetheless, it's still a 4-wide stack with a 3-residue in it.

![Без названия (2)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/488585e8-2972-4f18-bf07-3964304c4ca4)


Now that you know that, you can make up your own 4-wide openers. You don't need a flat Z or T specifically, you just need to make sure that your opener adds those 3 blocks of residue to the 4-wide. You do this by having any 3 blocks of a piece inside the 4-wide, and one block on one of the sides. The part of the piece that becomes the 3 block residue is highlighted with a different color.

![Без названия](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/fbad7801-4a88-4a83-b939-f46cb28c331a)


## Real vs logical stacks

A "real" stack is one that is separated from other stacks by a well. The obvious example is the quad wells; when you say "2-7" or "5-4", you are mentioning the width of two real stacks. If you say 3-3, for example, it means that you have a 3-wide stack and another 3-wide stack separated by a well, usually you'd mean the center 4-wide combo in that case. A rare case of skill issue can lead you into this kind of stack:

![Без названия (13)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/32579eec-d0e0-46cb-b336-c9e2f6af3dca)

I consider this matrix as having two real stacks: a 7-wide and a 2-wide, because there's really no way you'll be placing a single piece on both of them at the same time. The only way to go back to a 9-wide stack is to stack up on the 2-wide stack with Z and T pieces until it's flatter. In a Kezdabez video on stacking, he tells you to stack up at the lowest part of your stack. This is actually done to have one wide stack instead of two or three narrow stacks, because wider stacks have more options.

Sometimes, we don't have a real separation between stacks, but it's easier to think for us that they're separated. For example, an ST stack can have this kind of board state:

![Без названия (14)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/87e7ed16-d784-43eb-b7da-c2b1a08296fc)

If you understand everything so far, you'll see it as a 7-wide stack with 2 block residue (highlighted in yellow). But in the mind of an ST stacker, it's still a 4-wide stack with 2 residue and a 3-wide stack with 0 residue (i.e. it's entirely flat). That's what I call a logical stack
separation - there's no wall, they're equal in height, and there is no well of any width between them - but we still separate them as if there's an invisible wall that must not be touched. Most ST stackers will always adhere to the following separation, and they will always make it work:

![image](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/502781c4-4f06-4d80-ba5f-9a01989b440d)

Another example is in how most people describe the 6-wide stack of a 6-3 sprint. Separating it into "here goes O pieces, here goes S pieces, here goes Z pieces". You can watch
a sprint run where the separation is never broken in this sprint run by MAXICUBI.

https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/5a71969d-6dff-4fd0-9439-c559f8d8c03c

Very few people actually stack this way, but they will still see the stack as a set of three 2-wide stacks, one with no residue and two with 1 residue each for S and Z pieces.

## So how does this all relate to Xie stacking?

When most people try to explain Xie stacking, they see the obvious stuff - there's a 2-wide with 1 residue, a second one next to it, and a 2-wide with 0 residue where you place a copious amount of O pieces. And the O pieces are always placed in the columns 5 and 6, where you can just hard drop them without moving. Like this:

![image](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/72604f8a-abd1-4e33-b4b0-e63288636f0b)

This is not entirely wrong, but those are not the logical stacks that Xie uses in his runs. His logical stacks are actually a 1-res 2-wide, and a 1-res 4-wide. If you were to draw an imaginary line in between them, this would be it

![image](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/2736fb60-090b-4b0d-b2f1-1502bf1b2203)

And the stack is always separated in this specific way. The 4-wide can never be to the left of the 2-wide.

Technically, after placing one piece in the 4-wide, it becomes a 5-res most of the time, but for simplicity's sake, I call it a 1-res.

## Why focus on 1-res?

A 1-res (from now on it's implied that it's the 4-wide residue) is crucial to Xie stacking. First of all, your only other option is a 3-res. If you only stick to 1-res stacking, you will only need to remember half of the stacking patterns a 6-3 stack needs.

Second of all, it's a lot more efficient than 3-res when it comes to how many inputs you need

Third of all, it's just a nicer board state than a 3-res most of the time.

## How do you actually Xie stack?

You start by creating the one block residue, and from there, you simply stack the 4-wide flat like any other stack, while using the 1-res 2-wide as a place for Ts, Zs, and Ss.

Really the only way to do that is with a T, J, or vertical L, which are the openers I'm sure you all know about

![Без названия (3)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/341b07b7-44d8-4590-8108-6f564a29e8db)

You can also try to build a 5-res stack. The simplest way to do it is 

![Без названия (4)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/408e9c08-2768-49a3-a3e4-eac037e8b01e)

You choose how you want to stack the 4-wide, there are no limitations. When you do 6-3, there's enough freedom to really limit yourself in stacking, be it avoiding double taps, only placing I pieces in 3rd and 7th columns, or whatever else you come up with. Those kinds of limitations you place on yourself will further reduce how many patterns you need to hold in your head while possibly reducing KPP or MKPP (i.e. will let your hands go faster). With that in mind, maxicube's run you saw earlier is technically Xie stack where they choose to extremely reduce patterns while damaging their KPP.

## How do you NOT Xie stack?
A common mistake is switching to a 3-res 4-wide by accident. Here is how you do it:

![Без названия (6)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/2ef7f839-30e6-46da-b0df-da1b751de525)

However, there's good new too. These same patterns can be used to go back from a 3-res to a 1-res. For example, if you place a flat I piece and follow it up with a tapback flat T piece, you actually get a 1-res.

![Без названия (7)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/90eb8f27-6bb2-44fc-b908-3254ba7cbeb0)

## I want more freedom/less kpp

Then you have to deal with the fact you will need to learn more patterns, and that most likely means slower improvement times. The secret to it is to treat the leftmost three columns as a 3-wide where you need to choose patterns carefully.
Take a look at this shape here:

![image](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/23b8c06a-ca17-448d-9a41-a11c3f2e5577)

If you look closely, you are placing five monominos in column 3. In LST terms, this is a 5-up, and if you know LST, you can probably already think of 10-20 ways of doing it. Columns 1 and 2 really don't matter; as long as column 3 gets 1, 5, or 9 monominos, you're getting a 1-res stack.
Examples:

![Без названия (8)](https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/104d6acf-1fe5-4637-920e-5c4d4b31d479)

You should really come up with your own though. Some of these are very inefficient in KPP, some are equal. The only patterns that actually reduce your kpp are LOJ, JZJ, LSL, IOO boxes with a T piece on top, and they probably won't make you faster without DAS preservation because the MKPP is equal without it

## But what if I don't know LST?

I've been typing this document for 3 hours straight, I'll get RSI if I continue. I'll probably explain when I get back to this document (probably never because I often forget)

## Example run

I've been told there's nothing to say about it, and that simply recording it will be enough. I was going to record a commentary video, but I don't know what to say at all about this run. I could come up with ways to get less KPP, but it won't teach anyone how to keep a 1-res stack

https://github.com/strawberrymilk1134/tetris-tutorials/assets/57014208/2618662f-867a-4e43-885c-db525c15ead2

# Summary

Xie stacking is when you stack a 1-residue 4-wide in columns 3, 4, 5, 6, and stack 4x4 boxes in column 7, 8, 9, 10
